# azure


# What is Azure AD Tenant
An Azure AD tenant provides identity and access management (IAM) capabilities to applications and resources used by your organization. An identity is a directory object that can be authenticated and authorized for access to a resource. Identity objects exist for human identities such as students and teachers, and non-human identities like classroom and student devices, applications, and service principles.

The Azure AD tenant is an identity security boundary that is under the control of your organization’s IT department. Within this security boundary, administration of objects (such as user objects) and configuration of tenant-wide settings are controlled by your IT administrators.


![image](https://user-images.githubusercontent.com/36766101/217786909-193b9f80-9210-44ae-8c80-33124f0b0d40.png)

![image](https://user-images.githubusercontent.com/36766101/217776048-24322cdb-82ad-4b51-aeac-8e14ca48bd2f.png)
![image](https://user-images.githubusercontent.com/36766101/217776773-a40f28f8-1a95-430d-8036-198e108783c9.png)
![image](https://user-images.githubusercontent.com/36766101/217777705-90784a32-8773-49cc-b713-2e144c6b68fa.png)
![image](https://user-images.githubusercontent.com/36766101/217781902-c90895e1-852e-467d-a2f3-23bc6bbfc27e.png)
![image](https://user-images.githubusercontent.com/36766101/217786625-39081d25-cc1f-4b3d-8d13-782867079b62.png)
![image](https://user-images.githubusercontent.com/36766101/218003003-ce2bb356-93b2-4d8b-9979-3530505d2ae1.png)
![image](https://user-images.githubusercontent.com/36766101/218003796-2a78237a-d5e8-41a6-8f83-95cb2ce317b4.png)



![image](https://user-images.githubusercontent.com/36766101/217737192-cdaf8910-9226-4e67-9d8c-fbfaf4ac82e4.png)
![image](https://user-images.githubusercontent.com/36766101/217737568-4edcb7bc-e23b-491a-9fbf-1d500a8713b0.png)

![image](https://user-images.githubusercontent.com/36766101/217738798-5f0ed9fc-172a-4c44-b28c-d094bca5ed36.png)
![image](https://user-images.githubusercontent.com/36766101/217738888-6afccc19-7b4c-416b-ad2b-7de69bfbaeb0.png)
![image](https://user-images.githubusercontent.com/36766101/217741446-fa292fa3-210f-4856-80a7-e46fe744ec99.png)
![image](https://user-images.githubusercontent.com/36766101/217742742-150f2b14-5992-4ec2-b4a3-f7079e9a2e61.png)
![image](https://user-images.githubusercontent.com/36766101/217743350-aee6593d-36de-42d6-bea8-87c9a19ab3f0.png)
![image](https://user-images.githubusercontent.com/36766101/217744579-2b45c806-3df5-4d7b-acbe-9740bb5a4d5b.png)
![image](https://user-images.githubusercontent.com/36766101/217745897-e59a1087-f86a-4463-926e-1f368fb042cf.png)




![image](https://user-images.githubusercontent.com/36766101/217773251-99805671-277a-4653-ab04-05218ace9746.png)


![image](https://user-images.githubusercontent.com/36766101/217687213-1e064797-72ca-45dd-9962-97f3ab7a5527.png)
![image](https://user-images.githubusercontent.com/36766101/217687499-8b928565-8f10-429d-8002-18f6b635932f.png)


![image](https://user-images.githubusercontent.com/36766101/217688661-06097d82-1c85-4119-b7d0-2d89082d970f.png)
![image](https://user-images.githubusercontent.com/36766101/217694298-17ca7eeb-195f-4feb-bf96-d943c3af36ba.png)

![image](https://user-images.githubusercontent.com/36766101/217695649-eb80e862-9d24-4c71-9c11-efaf6408075c.png)


![image](https://user-images.githubusercontent.com/36766101/217695922-783c07ed-4340-4f4a-bf8e-29933bbdf0a9.png)

![image](https://user-images.githubusercontent.com/36766101/217696459-52b57ed2-b208-4927-872e-beb204daf462.png)

![image](https://user-images.githubusercontent.com/36766101/217720081-9990e015-3b0b-4f8b-a95d-7a09e1d0c31e.png)

![image](https://user-images.githubusercontent.com/36766101/217718425-89ee990e-71ac-4084-8c5e-f8c69a98fbc9.png)


Azure two queue solution, storage account queue and service bus queue

![image](https://user-images.githubusercontent.com/36766101/218024619-0c2bbbca-ce71-4e3d-b6c6-07021d835ecd.png)

Azure Event Grid 
![image](https://user-images.githubusercontent.com/36766101/218025269-882324c7-d25e-41de-bc07-29a916ba909e.png)

Azure Event Grid vs Event Hub vs Service Bus
![image](https://user-images.githubusercontent.com/36766101/218040662-7e134318-0e45-4015-82a0-6c9b13e5aba3.png)


![image](https://user-images.githubusercontent.com/36766101/218052323-a6e8bf5c-f077-4e5a-8892-4c06920e8cd9.png)

Azure Event Grid
![image](https://user-images.githubusercontent.com/36766101/218061223-b4a84512-26c9-4cb7-8142-e7e35578037c.png)


![image](https://user-images.githubusercontent.com/36766101/218061382-bda6f428-3998-4560-b317-1de38974691f.png)


Azure CDN

![image](https://user-images.githubusercontent.com/36766101/218064278-9702cb45-177f-4813-b132-db1a2799d316.png)


Azure API Management

internal mode
![image](https://user-images.githubusercontent.com/36766101/218082600-2cd8f1be-7a53-4d4f-b6c4-9ddae815d4a7.png)


external mode
![image](https://user-images.githubusercontent.com/36766101/218082642-1ee0b9e3-247d-4906-b976-44778f354931.png)


OAuth2 (Open Authorization) workflow
OAuth2 is a standard designed to allow a website or application to access resources hosted by other web apps on behalf of a user.OAuth 2.0 is an authorization protocol and NOT an authentication protocol. As such, it is designed primarily as a means of granting access to a set of resources, for example, remote APIs or user data.

OAuth 2.0 uses Access Tokens. An Access Token is a piece of data that represents the authorization to access resources on behalf of the end-user. OAuth 2.0 doesn’t define a specific format for Access Tokens. However, in some contexts, the JSON Web Token (JWT) format is often used. 
![image](https://user-images.githubusercontent.com/36766101/218095716-3ce416d0-2d76-4da5-98ed-ef2ce72c83ae.png)



Grant limited access to Azure Storage resources using shared access signatures (SAS), it is similar to AWS S3 pre-signed URL.
Both of those features allow anyone (with whom shared link was shared) to download or upload a file. This feature is very useful when you want to temporary share a file with some user(s) or to allow them to upload a file, without sharing your credentials (temporary creds, creating an account, etc).


Azure Files

![image](https://user-images.githubusercontent.com/36766101/218239041-00a549d4-554a-47f9-bee2-1516501a3e50.png)

One fundamental building block of Microsoft’s Azure storage services is Storage Accounts, which are top-level resources that represent a shared pool of storage. These resources offer table, queue, and blob storage for an application’s persistent storage requirements.Azure files allowing access to file storage with the Server Message Block (SMB) and Network File System (NFS) protocols used in traditional file system infrastructure.

![image](https://user-images.githubusercontent.com/36766101/218239834-3aae7dc6-ab93-4f4d-97c2-f63c9f6966f5.png)

Organizations looking to utilize Azure Files at the enterprise scale can use Azure File Sync to cache data on the Local Area Network (LAN), reduce latency, and improve user experience


Azure Backup service

On-premises - Back up files, folders, system state using the Microsoft Azure Recovery Services (MARS) agent. Or use the DPM or Azure Backup Server (MABS) agent to protect on-premises VMs (Hyper-V and VMware) and other on-premises workloads
Azure VMs - Back up entire Windows/Linux VMs (using backup extensions) or back up files, folders, and system state using the MARS agent.
Azure Managed Disks - Back up Azure Managed Disks
Azure Files shares - Back up Azure File shares to a storage account
SQL Server in Azure VMs - Back up SQL Server databases running on Azure VMs
SAP HANA databases in Azure VMs - Backup SAP HANA databases running on Azure VMs
Azure Database for PostgreSQL servers - Back up Azure PostgreSQL databases and retain the backups for up to 10 years
Azure Blobs - Overview of operational backup for Azure Blobs


Azure virtual network
![image](https://user-images.githubusercontent.com/36766101/218245613-2551e44e-ee30-4203-8a30-6078e20460a3.png)
Virtual Network NAT is a fully managed and highly resilient Network Address Translation (NAT) service. Virtual Network NAT simplifies outbound Internet connectivity for virtual networks. When configured on a subnet, all outbound connectivity uses the Virtual Network NAT's static public IP addresses.


# Azure network best practice
1 Control public IP addresses,Public IP addresses in Azure can be associated with VMs, load balancers, application gateways, and VPN gateways.A better practice is to put VMs behind Azure Load Balancer or Azure Application Gateway. 

2 Use application security groups,Application Security Groups helps to manage the security of Virtual Machines by grouping them according the applications that runs on them. It is a feature that allows the application-centric use of Network Security Groups.ASGs are used within a NSG to apply a network security rule to a specific workload or group of VMs.

![image](https://user-images.githubusercontent.com/36766101/218248348-4114be25-e09d-4fb3-8d98-a758ace34d53.png)
![image](https://user-images.githubusercontent.com/36766101/218249082-e59de4df-81a1-4ba7-96a9-55a8720c397d.png)

3 Secure north/south and east/west traffic.To secure virtual networks, consider attack vectors. Note the following points:
Using only subnet NSGs simplifies your environment, but only secures traffic into your subnet. This traffic is known as north/south traffic.
Traffic between VMs on the same subnet is known as east/west traffic.

4 Filter virtual network traffic with NSGs,Network security groups (NSGs) contain multiple inbound and outbound security rules that filter traffic going to and from resources. Filtering can be by source and destination IP address, port, and protocol.

5 Implement an Azure perimeter network.Although Microsoft invests heavily in protecting the cloud infrastructure, you must also protect your cloud services and resource groups. A multilayered approach to security provides the best defense. Putting a perimeter network in place is an important part of that defense strategy.

6 Optimize ExpressRoute routing with BGP communities,When you have multiple ExpressRoute circuits, you've got more than one path to connect to Microsoft. As a result, suboptimal routing can happen and your traffic might take a longer path to reach Microsoft, and Microsoft to your network. The longer the network path, the higher the latency.

7 Implement ExpressRoute for mission-critical connections.The Azure ExpressRoute service extends your on-premises infrastructure into the Microsoft cloud. ExpressRoute creates private connections between the virtual Azure datacenter and on-premises networks.

8 Implement Azure Virtual WAN for branch offices,For multiple VPN connections, Azure Virtual WAN is a networking service that provides optimized and automated, branch-to-branch connectivity through Azure.

9 Implement a highly available Site-to-Site VPN

10 Implement a hub and spoke network topology,
![image](https://user-images.githubusercontent.com/36766101/218247752-ebd3d9cd-e62c-4804-8e21-47c46bc686a2.png)
A hub and spoke network topology isolates workloads while sharing services, such as identity and security. The hub is an Azure virtual network that acts as a central point of connectivity. The spokes are virtual networks that connect to the hub virtual network by using peering. Shared services are deployed in the hub, while individual workloads are deployed as spokes.

11 Design subnets,To provide isolation within a virtual network, you segment it into one or more subnets, and give a portion of the virtual network's address space to each subnet.By default, Azure routes network traffic between all subnets in a virtual network.Your subnet decisions are based on your technical and organizational requirements.You create subnets by using CIDR notation

12 Set up a DNS server
Azure adds a DNS server by default when you deploy a virtual network. You can use this server to rapidly build virtual networks and deploy resources. But this DNS server only provides services to the resources on that virtual network. To connect multiple virtual networks together, you need more name resolution capabilities. You'll also need these capabilities to connect to an on-premises server from virtual networks. For example, you might need Active Directory to resolve DNS names between virtual networks. To resolve the DNS names, deploy your own custom DNS server in Azure


13 Deploy Azure Firewall
![image](https://user-images.githubusercontent.com/36766101/218254964-0fd5e192-76e8-4650-a1a6-3056f6457180.png)

14 Deploy Web Application Firewall,
![image](https://user-images.githubusercontent.com/36766101/218256149-fb0e4037-6b78-4b1a-b011-9cae74eb5641.png)
Web applications are increasingly targets of malicious attacks that exploit commonly known vulnerabilities. Exploits include SQL injection attacks and cross-site scripting attacks. Preventing such attacks in application code can be challenging. 

Implement Network Watcher,Network Watcher provides tools to monitor resources and communications in an Azure virtual network. For example, you can monitor communications between a VM and an endpoint, such as another VM or FQDN. You can also view resources and resource relationships in a virtual network, or diagnose network traffic issues.
